# Chrome 工作原理


## 1.  Chrome 的架构

经过历史的发展， chrome  由当初的单进程发展到现在更加稳定的多进程架构：

**浏览器进程（Browser Process）**

    主要负责页面展示、用户交互、子进程管理，同时提供存储等功能。

**渲染进程（安全的沙箱模式 sandbox）**

    默认情况下 Chrome 会为 每个 Tab 标签创建一个渲染进程， 负责将 HTML、CSS、和 JavaScript 转化为网页，
    排版引擎 Blink 和 JavaScript 引擎 V8 都是在该进程中。

**网络进程** 
    
    负责页面的网络资源下载。

**GPU 进程**

    网页和 Chrome 的 UI 界面都是采用 GPU 来绘制。  

**插件进程（sandbox）**

    负责插件的运行，为了安全所以运行在沙箱模式下，插件进程独立出来使得插件崩溃不会影响到网页。


## 2. HTTP 协议

**TCP/IP**

    TCP 处在传输层，传输数据分为三个阶段：三次握手、数据传输（每次传输都要校验）、四次挥手。

**HTTP**

    HTTP 的数据请求是在 TCP 的数据传输阶段。
    HTTP 请求的数据格式：请求行、请求头、请求体（post 请求携带的数据） 
    HTTP 响应数据格式：响应行、响应头、响应体
    
> 为什么很多网站第二次打开的速度会很快（浏览器的缓存机制）？

答：DNS 缓存和 页面资源缓存。服务器通过响应头的 cache-control 来设置浏览器是否缓存资源，还有一个Max-age 参数设置缓存过期时长。
如果缓存过期，浏览器则继续发起请求，服务器收到请求后，根据 If-None-Match 的值来判断请求的资源是否有更新，没有则返回 304 表示缓存可以继续使用，如果有更新则返回最新数据给浏览器。

> 如何实现会话？

cookie 的机制，当然cookie 本身是不安全的，这会在安全篇讲解。



